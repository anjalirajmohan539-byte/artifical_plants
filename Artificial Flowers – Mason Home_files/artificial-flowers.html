<!DOCTYPE html>
<!-- saved from url=(0206)https://masonhome.in/web-pixels@a678f985wf512d8e4p074b229bma05a5fb0/custom/web-pixel-78413922@1/sandbox/modern/collections/artificial-flowers?srsltid=AfmBOooM6sf1vWg98vhcjMeyWqfAu2ONgrpB69ANkoMWDRd9GvmBm1MN -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Artificial Flowers â€“ Mason Home</title>
    <script src="./sa678f985wf512d8e4p074b229bma05a5fb0m.js.download"></script>

    <script type="text/javascript">
  (function(shopify) {shopify.extend('WebPixel::Render', function(api) {
var analytics=api.analytics,browser=api.browser,init=api.init;
const tagId = 'G-CZPMJBL4N7';

const script = document.createElement('script');
script.setAttribute('src', 'https://www.googletagmanager.com/gtag/js?id=' + tagId);
document.head.appendChild(script);

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

function updateConsentSettings(customerPrivacy) {
  gtag('consent', 'update', {
    'ad_storage': customerPrivacy?.marketingAllowed ? 'granted' : 'denied',
    'ad_user_data': customerPrivacy?.marketingAllowed ? 'granted' : 'denied',
    'ad_personalization': customerPrivacy?.marketingAllowed ? 'granted' : 'denied',
    'analytics_storage':
        customerPrivacy?.analyticsProcessingAllowed ? 'granted' : 'denied'
  });
}

updateConsentSettings(init?.customerPrivacy);

api.customerPrivacy.subscribe('visitorConsentCollected', (event) => {
  updateConsentSettings(event?.customerPrivacy);
});

const isCheckoutPage = (function () {
  return this?._pixelInfo?.surfaceNext === 'checkout';
}).bind(this);

function setIgnoreReferrer() {
  if (isCheckoutPage()) {
    gtag('set', {'ignore_referrer': 'true'});
  }
}

setIgnoreReferrer();

gtag('set', 'developer_id.dMmQyMD', true);
gtag('js', new Date());

gtag('config', tagId, {
  'send_page_view': false
});

// Helper function to send ecommerce events
function sendEcommerceEvent(eventName, eventParams, event) {
  gtag(
    'set',
    'page_location',
    event?.context?.document?.location?.href);
  setIgnoreReferrer();
  gtag('event', eventName, eventParams);
}

function computeVariantName(productVariant) {
  const name = productVariant?.title;
  if (['default', 'title', 'default title', ''].includes(
        String(name).toLowerCase())) {
    return null;
  }
  return name;
}

function computeValue(checkout) {
  const subtotal = checkout?.subtotalPrice?.amount;
  const discounts = checkout?.discountsAmount?.amount;
  return subtotal && discounts ? subtotal - discounts : subtotal;
}

// Subscribe to Shopify events and send data to GA4
analytics.subscribe("checkout_completed", (event) => {
  const items = event?.data?.checkout?.lineItems?.map((item) => ({
    item_id: item?.variant?.product?.id,
    item_name: item?.variant?.product?.title,
    item_brand: item?.variant?.product?.vendor,
    item_category: item?.variant?.product?.type,
    coupon: item?.discountAllocations?.[0]?.discountApplication?.title,
    price: item?.variant?.price?.amount,
    quantity: item?.quantity,
    item_variant: computeVariantName(item?.variant)
  }));
  sendEcommerceEvent("purchase", {
    currency: event?.data?.checkout?.currencyCode,
    value: computeValue(event?.data?.checkout),
    transaction_id: event?.data?.checkout?.order?.id,
    coupon: event?.data?.checkout?.discountAllocations,
    shipping: event?.data?.checkout?.shippingLine?.price?.amount,
    tax: event?.data?.checkout?.totalTax?.amount,
    items: items
  }, event);
});

analytics.subscribe("payment_info_submitted", (event) => {
  const items = event?.data?.checkout?.lineItems?.map((item) => ({
    item_id: item?.variant?.product?.id,
    item_name: item?.variant?.product?.title,
    item_brand: item?.variant?.product?.vendor,
    item_category: item?.variant?.product?.type,
    coupon: item?.discountAllocations?.[0]?.discountApplication?.title,
    price: item?.variant?.price?.amount,
    quantity: item?.quantity,
    item_variant: computeVariantName(item?.variant)

  }));
  sendEcommerceEvent("add_payment_info", {
    currency: event?.data?.checkout?.currencyCode,
    value: event?.data?.checkout?.subtotalPrice?.amount,
    items: items
  }, event);
});

analytics.subscribe("checkout_started", (event) => {
  const items = event?.data?.checkout?.lineItems?.map((item) => ({
    item_id: item?.variant?.product?.id,
    item_name: item?.variant?.product?.title,
    item_brand: item?.variant?.product?.vendor,
    item_category: item?.variant?.product?.type,
    coupon: item?.discountAllocations?.[0]?.discountApplication?.title,
    price: item?.variant?.price?.amount,
    quantity: item?.quantity,
    item_variant: computeVariantName(item?.variant)
  }));
  sendEcommerceEvent("begin_checkout", {
    currency: event?.data?.checkout?.currencyCode,
    value: computeValue(event?.data?.checkout),
    items: items
  }, event);
});

analytics.subscribe("cart_viewed", (event) => {
  const items = event?.data?.cart?.lines?.map((item) => ({
    item_id: item?.variant?.product?.id,
    item_name: item?.variant?.product?.title,
    item_brand: item?.variant?.product?.vendor,
    item_category: item?.variant?.product?.type,
    coupon: item?.discountAllocations?.[0]?.discountApplication?.title,
    price: item?.variant?.price?.amount,
    quantity: item?.quantity,
    item_variant: computeVariantName(item?.variant)

  }));
  sendEcommerceEvent("view_cart", {
    currency: event?.data?.cart?.cost?.totalAmount?.currencyCode,
    value: event?.data?.cart?.cost?.totalAmount?.amount,
    items: items
  }, event);
});

analytics.subscribe("product_added_to_cart", (event) => {
  sendEcommerceEvent("add_to_cart", {
    currency: event?.data?.cartLine?.cost?.totalAmount?.currencyCode,
    value: event?.data?.cartLine?.cost?.totalAmount?.amount,
    items: [{
      item_id: event?.data?.cartLine?.merchandise?.product?.id,
      item_name: event?.data?.cartLine?.merchandise?.product?.title,
      price: event?.data?.cartLine?.merchandise?.price?.amount,
      quantity: event?.data?.cartLine?.quantity
    }]
  }, event);
});

analytics.subscribe("product_viewed", (event) => {
  sendEcommerceEvent("view_item", {
    currency: event?.data?.productVariant?.price?.currencyCode,
    value: event?.data?.productVariant?.price?.amount,
    items: [{
      item_id: event?.data?.productVariant?.product?.id,
      item_name: event?.data?.productVariant?.product?.title,
      price: event?.data?.productVariant?.price?.amount
    }]
  }, event);
});

analytics.subscribe("page_viewed", (event) => {
  sendEcommerceEvent('page_view', {}, event);
});
});})(self.webPixelsManager.createShopifyExtend('78413922', 'custom'));

</script>

  <script src="https://www.googletagmanager.com/gtag/js?id=G-CZPMJBL4N7"></script></head>
  <body>

</body></html>